/speckit.constitution  这是一个前端图形拖拽编排项目，用以实现隐私计算的图形化拖拽编排操作。用户可拖拽数据源、任务等元素，将其连接成DAG任务图，并详细设置每个任务的细节属性，最终生成一份标准的json格式的DAG任务图。
- 参考CLAUDE.md获得初始宪章需要的必要信息
- 这是前端项目，本身不包含后端服务，与后端服务之间存在接口调用。但是须要注意，在开发测试阶段不要依赖后端服务，要提供mock的测试桩

/speckit.specify  在拖拽一个数据源到画布释放时，需要让用户能够选择具体的数据资产，并且在选定之后，当鼠标选择了画布上的这个数据源时，可以在右侧显示其具体的数据资产信息。以上用户的编排结果要包含在导出的json中
- **选择数据资产的过程**：通过选择企业->选择数据资产->选择数据资产中的多个字段的过程确定最终数据资源
- **企业列表接口**：接口位于`.myprompt/specs/interfaces/企业列表.md`，可获取得全部企业列表，或根据企业名称过滤
- **数据资产列表接口**：接口位于`.myprompt/specs/interfaces/数据资产列表.md`, 可获取全部数据资产列表，或根据所属企业名称、资产名称等信息过滤
- **数据资产详情接口**：接口位于`.myprompt/specs/interfaces/数据资产详情.md`，确定数据资产后，可使用次列表获取数据资产全部源信息，以便根据字段进行选择
- **数据资产选择|编排**：对拖拽到画布的数据源，设计一种高效、易用、用户界面友好的的选择、编排数据资产的方式
- **任务图结果导出**：一个数据源经过选择最终对应一个确定的数据资产，编排完成后，导出整个DAG图为json的时候，数据源要包含


/speckit.specify  **计算任务的编排**:拖拽计算任务节点至画布，选择软件或硬件技术路径后，同其他节点连接，如：由数据源节点或其他任务节点连接输入源、选择和编排计算模型、选择计算资源(如果是硬件TEE)、编排输出数据字段、将输出连入其他任务节点，最后编排结果处理任务。最终，整个DAG的编排工作结束后，可将编排结果导出成一种标准的json格式，导出格式范例为`.myprompt/specs/models/dag.json`。
- **计算模型**：左侧除"数据源"和"计算任务"外，新增"计算模型"，下有两种可拖拽模型："MPC模型(软件)","MPC模型(TEE)"。
  - 计算模型要拖拽到"MPC任务"节点才能生效并开启选择或编排
  - 计算模型选择完毕后，不在画布上产生节点，而是会在"计算任务"节点里面显示为计算模型section下的一个子section，然后在计算任务节点详情中进行编排
- **算力资源**：左侧除"数据源"、"计算任务"和"计算模型"外，新增"算力资源", 下面目前只有一种可拖拽算力"TEE板卡"。
  - **TEE板卡算力**：也要拖拽到"MPC任务"节点才能生效并开启选择，选择方式也是类似，选择企业->选择算力，相关接口位于`.myprompt/specs/interfaces/企业列表.md`、`.myprompt/specs/interfaces/算力目录/全网算力列表.md`
  - TEE板卡算力选择完毕后，也不在画布上产生节点，而是会在"计算任务"节点里面显示，然后在计算任务节点详情中进行编排
- **计算任务**：类似"数据源"节点，计算任务节点也需要改成卡片展现形式，且内容更丰富，展现**输入数据**、**计算模型**、**算力资源**、**输出字段**几个可折叠section，右侧节点详情中可以同时对这几个section进行展示和修改
  - **选择技术路径**：拖拽计算任务在画布中释放时，弹出页面选择使用"软件密码学"技术路径还是"硬件TEE"技术路径，这两种是非常重要的计算任务节点类型，会影响后续的操作和界面，需要能够在任务节点上明显辨识，且类型一经选定不可更改。
  - **输入数据**section：当一个数据源节点或计算任务节点连线至计算任务时，即为计算任务新增输入数据源，弹出页面进行字段选择，确定后可在右侧节点详情中可以进行编辑修改。
    - 可选字段由前置数据源节点的数据资产信息或前置任务节点的输出字段决定，至少包含一个字段，不选即为使用全部字段
    - **Join字段**：选择字段时必须指定至少一个字段是Join字段，并选择join类型为**INNER**内连接还是**CROSS**笛卡尔积连接
    - 输入数据可以有多个，可来自于数据源节点和其他计算任务节点，作为子section，显示在"输入数据"section下方，并可折叠
    - 右侧详情中修改时，可以为每个字段设置别名，别名可在计算模型编排时使用
    - 当鼠标悬停至数据源连线时，动态展示数据来源、数据目标、选择的字段等信息
  - **计算模型**section：模型由右侧菜单拖拽到当前任务选定，同样可在右侧节点详情中可以进行编排修改，
    - 计算模型拖入计算任务时，要进行校验，"MPC模型(软件)"只能拖入"软件密码学"技术路径的计算任务，"MPC模型(TEE)"只能拖入"硬件TEE"技术路径的任务
    - **MPC模型**: 在拖入时必须先选择，选择方式同数据资产类似，选择企业->选择模型，相关接口位于`.myprompt/specs/interfaces/企业列表.md`、`.myprompt/specs/interfaces/模型目录/计算模型/获取全网计算模型.md`
      - **参数映射**：在右边详情面板对模型的参数进行编排，即将参数与某个输入数据的字段进行绑定，也可支持参数为固定值
    - **MPC模型**: 则不需要过多的选择，直接以一个代码编辑文本框的形式展示为计算模型的子section
      - 文本框中可以支持python语法，可以用"participantId.assetName.columnName"的命名方式使用所有连接进来的输入数据
      - 这个文本框在编辑的时候需要类似编程IDE，提供一定的辅助功能，比如代码变量补全，即补全刚才提到的输入数据列的引用"participantId.assetName.columnName"
    - 计算模型可以选多个，每个模型可作为子section，显示在"计算模型"section下方，并可折叠
  - **算力资源**section：目前仅有"硬件TEE"技术路径的任务可选择**TEE板卡算力**，且可选择多个，每个算力资源展示为子section
  - **输出字段**section：可以定制输出的字段，同时为全部结果指定**输出参与方企业(participantId)**目前字段来源可以有两种：**原始字段**和**计算结果字段**，且原始字段和结果字段可以同时混合选择多个
    - **原始字段**：可从输入的数据源中选择
    - **计算结果字段**：可以指定当前任务中某个模型的第x个输出，作为输出字段
    - **输出参与方企业(participantId)**：可以选择多个，优先从当前任务全部任务的相关资源方列表(包括：数据资源所属企业、计算模型所属企业、算力所属企业)选取，也支持从其他全网企业中选择，默认是当前任务全部任务的相关资源方全选
- **本地计算任务**：增加本地计算任务菜单，包含**计算结果处理**任务、**本地Query任务**等
  - **计算结果处理**：拖拽释放到画布时需选择**参与方participant**，可连线**接入计算任务的输出**
    - **参与方企业(participantId)**：只能选择一个，优先从当前流程全部任务的相关资源提供方列表(包括：数据资源所属企业、计算模型所属企业、算力所属企业)选取，也支持从其他全网企业中选择
    - **接入计算任务的输出**：只能接入一个计算任务的结果输出
  - **本地Query任务**：待明确
