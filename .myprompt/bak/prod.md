# 隐私计算任务可视化拖拽产品需求文档
本项目为隐私计算用户提供可视化构建隐私计算任务图的能力。通过对数据库表、不同隐私计算技术路径任务进行可视化拖拽、连接、编排，快速构建满足业务需求的 DAG 计算任务图

## UI界面设计
整个页面主要由左、中、右三部分组成，左边是资源库，中间是中央画布，右边是详情表单

- **资源库**：由可折叠的层级列表组成，列举了各种可拖拽元素：数据资源、模型资源、算力资源、以及最重要的不同类型的计算任务
- **中央画布**：可以将资源库中的资源拖拽到画布，进行连线、编排等操作，最终形成DAG任务图
- **详情表单**：作用是，当画布中某个元素被鼠标点击成为焦点后，其可编辑属性就展示在详情表单，可由用户编辑。

### 资源库
界面上可拖拽的元素有以下几类：数据资源、计算任务资源、模型资源、算力资源

- **数据资源**：按参与方划分，多指数据库的库表(但不仅限于库表，有类似schema的csv、txt文件都符合要求)，数据资源的元信息包含：数据名称、从参与方、包含的字段及其类型、主键字段、数据规模等。
- **计算任务资源**：包含多方跨域隐私计算任务和本地计算任务
  - **隐私计算任务**：包含**PSI(隐私集合求交)**、**MPC(多方安全计算)**、**PIR(隐匿查询)**、**FL(联邦学习)**等任务
  - **本地计算任务**：包含**数据导入**、**数据导出**、**数据过滤**、**数据拼接**等任务
- **模型资源**：目前暂指TEE模型，每个TEE模型的元信息包括：方法名称、方法参数及其类型、返回参数及其类型
- **算力资源**：目前仅指TEE算力，从属于不同的参与方

### **中央画布**
编排任务图，可选择多个数据资源和多个计算任务拖拽至画布，将其拖拽连接组成任务图，并支持为计算任务拖拽指定模型和算力

- 整个任务图以数据资源为起始点,以数据导出任务为终点，起点、终点均允许有多个，中间以有向线连接多个计算任务
- 类似泳道图，整个任务图的流向是自上而下的纵向分布，横向则按照不同参与方划分域(泳道)
- 数据资源以圆形显示；计算任务以圆角长方形显示；数据模型以圆角正方形显示；数据模型以圆形显示
- 数据资源必须位于整个画布的顶端，数据导出任务则为最底端(末端)
- 数据资源与计算任务、计算任务与计算任务之间的连线代表一个数据资源，线端形状根据数据流向为输入或输出显示为剪头或梯形
- 每个计算任务可有多个输入和输出的连线，每个输入输出有独立的线端形状附着点，因数据流向是自上而下，故一般上边缘为输入、下边缘为输出
- 每个计算任务可同时拖拽附着多个数据模型，附着线端形状为菱形，且多个数据模型共用一个附着点
- 每个计算任务只能拖拽附着一个算力资源，附着线端形状为

### 详情表单
在中央画布中选择某个元素后，在详情表单中列出其元信息属性，可供用户输入编辑

## 功能清单
- 创建新任务图，即创建一个新任务图，生成一个新tab页空白画板
- 导出任务图，将编排好的任务图转换为json格式的文件，可导出保存
- 导入任务图，将json格式的文件导入，转换为任务图展示在新tab页的中央画布中

## 其他要求
- 任务图的风格要参考`.myprompt/sample.dag.png`

